<?xml version="1.0"?>
<configuration>
	<property name="logFolder" value="log/" />
	<property file="config/main/logging.properties" />
	<property file="config/mycs.properties" />
	<appender name="out_console" class="ch.qos.logback.core.ConsoleAppender">
		<withJansi>true</withJansi>
		<encoder>
			<charset>CP850</charset> <!-- UTF-8 on linux -->
			<Pattern>%date{HH:mm:ss} %highlight(%-5level) %gray([%thread]) - %message%n</Pattern>
		</encoder>
	</appender>
	<appender name="app_console" class="ch.qos.logback.core.FileAppender">
		<file>${logFolder}/server_console.log</file>
		<encoder>
			<charset>UTF-8</charset>
			<Pattern>%date %-5level [%thread] %logger - %message%n</Pattern>
			<immediateFlush>false</immediateFlush>
		</encoder>
	</appender>
	<appender name="app_warn" class="ch.qos.logback.core.FileAppender">
		<filter class="ch.qos.logback.classic.filter.LevelFilter">
			<level>WARN</level>
			<onMatch>ACCEPT</onMatch>
			<onMismatch>DENY</onMismatch>
		</filter>
		<file>${logFolder}/server_warnings.log</file>
		<encoder>
			<Pattern>%date %logger - %message%n</Pattern>
		</encoder>
	</appender>
	<appender name="app_error" class="ch.qos.logback.core.FileAppender">
		<filter class="ch.qos.logback.classic.filter.LevelFilter">
			<level>ERROR</level>
			<onMatch>ACCEPT</onMatch>
			<onMismatch>DENY</onMismatch>
		</filter>
		<file>${logFolder}/server_errors.log</file>
		<encoder>
			<Pattern>%date %logger - %message%n</Pattern>
		</encoder>
	</appender>
	<appender name="app_chat" class="ch.qos.logback.core.FileAppender">
		<file>${logFolder}/chat.log</file>
		<encoder>
			<Pattern>%date %message%n</Pattern>
		</encoder>
	</appender>
	<appender name="app_hipchat" class="com.aionemu.commons.logging.HipChatRoomAppender">
		<layout>
			<pattern>%msg</pattern>
		</layout>
		<room>${chatserver.log.chat.hipchat.room}</room>
		<apiKey>${chatserver.log.chat.hipchat.token}</apiKey>
		<color>gray</color>
		<messageFormat>text</messageFormat>
		<senderSeparatorPattern>:\s</senderSeparatorPattern> <!-- message content in front of this separator will be used as the sender name -->
	</appender>
	<appender name="app_hipchat_async" class="ch.qos.logback.classic.AsyncAppender">
		<appender-ref ref="app_hipchat" />
	</appender>
	<logger name="CHAT_LOG" additivity="false">
		<appender-ref ref="app_chat" />
		<appender-ref ref="app_hipchat_async" />
	</logger>
	<root level="INFO">
		<appender-ref ref="out_console" />
		<appender-ref ref="app_console" />
		<appender-ref ref="app_error" />
		<appender-ref ref="app_warn" />
	</root>
</configuration>